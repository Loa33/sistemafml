(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd269a78"],{"0e8f":function(t,e,i){"use strict";i("20f6");var a=i("e8f2");e["a"]=Object(a["a"])("flex")},"169a":function(t,e,i){"use strict";i("368e");var a=i("480e"),s=i("4ad4"),o=i("b848"),n=i("75eb"),r=i("e707"),c=i("e4d3"),l=i("21be"),d=i("f2e7"),u=i("a293"),h=i("58df"),v=i("d9bd"),m=i("80d2");const p=Object(h["a"])(s["a"],o["a"],n["a"],r["a"],c["a"],l["a"],d["a"]);e["a"]=p.extend({name:"v-dialog",directives:{ClickOutside:u["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[("v-dialog "+this.contentClass).trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&Object(v["e"])("full-width",this)},beforeMount(){this.$nextTick(()=>{this.isBooted=this.isActive,this.isActive&&this.show()})},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick(()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout(()=>this.animate=!1,150)})},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):r["a"].options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick(()=>{this.$nextTick(()=>{this.previousActiveElement=document.activeElement,this.$refs.content.focus(),this.bind()})})},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===m["w"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick(()=>t&&t.focus())}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some(t=>t.contains(e))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find(t=>!t.hasAttribute("disabled"));e&&e.focus()}},genContent(){return this.showLazyContent(()=>[this.$createElement(a["a"],{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"document",tabindex:this.isActive?0:void 0,...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])])},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:"none"===this.maxWidth?void 0:Object(m["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(m["g"])(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"2fa4":function(t,e,i){"use strict";i("20f6");var a=i("80d2");e["a"]=Object(a["h"])("spacer","div","v-spacer")},"31f6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{id:"productos",fluid:"",tag:"section"}},[i("base-v-component",{attrs:{heading:"Productos",link:"almacen/productos"}}),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("base-material-card",{attrs:{color:"#1c629e"},scopedSlots:t._u([{key:"heading",fn:function(){return[i("div",{staticClass:"display-2 font-weight-light"},[t._v("Productos")]),i("div",{staticClass:"subtitle-1 font-weight-light"})]},proxy:!0}])},[i("v-row",[i("v-col",{attrs:{cols:"9"}},[i("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"mdi-magnify",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-col",[i("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.dialog=!0}}},a),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valida,callback:function(e){t.valida=e},expression:"valida"}},[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[i("v-text-field",{attrs:{label:"Código",rules:t.codigoRules,required:""},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),i("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[i("v-select",{attrs:{items:t.categorias,rules:t.requiredRules,label:"Categoría",required:""},model:{value:t.idCategoria,callback:function(e){t.idCategoria=e},expression:"idCategoria"}})],1),i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-text-field",{attrs:{label:"Nombre",rules:t.nombreRules,required:""},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),i("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[i("v-text-field",{attrs:{type:"number",label:"Stock",rules:t.stockRules},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1),i("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[i("v-text-field",{attrs:{rules:t.precioRules,required:"",label:"Precio Venta"},model:{value:t.precioVenta,callback:function(e){t.precioVenta=e},expression:"precioVenta"}})],1),i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-text-field",{attrs:{rules:t.descripcionRules,required:"",label:"Descripción"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("Cancelar")]),i("v-btn",{attrs:{color:"blue darken-1",disabled:!t.valida,flat:""},nativeOn:{click:function(e){return t.guardar(e)}}},[t._v("Guardar")])],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[i("v-card",[1==t.adAccion?i("v-card-title",{staticClass:"headline"},[t._v("¿Activar Item?")]):t._e(),2==t.adAccion?i("v-card-title",{staticClass:"headline"},[t._v("¿Desactivar Item?")]):t._e(),i("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?i("span",[t._v("Activar ")]):t._e(),2==t.adAccion?i("span",[t._v("Desactivar ")]):t._e(),t._v(" el ítem "+t._s(t.adNombre)+" ")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.activarDesactivarCerrar}},[t._v(" Cancelar ")]),1==t.adAccion?i("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.activar}},[t._v(" Activar ")]):t._e(),2==t.adAccion?i("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.desactivar}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)],1)],1),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.productos,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[t._v(t._s(e.item.codigo))]),i("td",[t._v(t._s(e.item.nombre))]),i("td",[t._v(t._s(e.item.categoria))]),i("td",[t._v(t._s(e.item.stock))]),i("td",[t._v(t._s(e.item.precioVenta))]),i("td",[t._v(t._s(e.item.descripcion))])]}},{key:"item.estado",fn:function(e){var a=e.item;return[i("td",[a.estado?i("div",[i("span",{staticClass:"blue--text"},[t._v("Activo")])]):i("div",[i("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"item.opciones",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"teal"},on:{click:function(e){return t.editItem(a)}}},[t._v("mdi-pencil")]),1==a.estado?[i("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"red"},on:{click:function(e){return t.activarDesactivarMostrar(2,a)}}},[t._v("mdi-toggle-switch")])]:[i("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"blue"},on:{click:function(e){return t.activarDesactivarMostrar(1,a)}}},[t._v("mdi-toggle-switch-off")])]]}}],null,!0)},[i("template",{slot:"no-data"})],2)],1)],1)],1)],1)},s=[],o=(i("d81d"),i("bc3a")),n=i.n(o),r={data:function(){return{productos:[],productosValidar:[],dialog:!1,headers:[{text:"Código",value:"codigo",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Categoría",value:"categoria"},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precioVenta",sortable:!1},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}],search:"",editedIndex:-1,id:"",idCategoria:"",categorias:[],codigo:"",nombre:"",stock:1,precioVenta:1,descripcion:"",valida:!0,codigoRules:[function(t){return!!t||"Debe llenar este campo"},function(t){return t&&t.length>=5&&t.length<=10&&/^[a-zA-Z0-9]*$/.test(t)||"El codigo debe tener mas de 5 y menos de 10 caracteres"}],nombreRules:[function(t){return!!t||"Debe llenar este campo"},function(t){return t&&t.length>=5&&/[A-Za-z ñ]+/.test(t)||"El nombre debe tener mas de 5 caracteres  alfabeticos"}],stockRules:[function(t){return!!t||"Debe llenar este campo"},function(t){return/^[1-9]+[0-9]*$/.test(t)||"El stock debe ser mayor a 0"}],descripcionRules:[function(t){return!!t||"Debe llenar este campo"},function(t){return t&&t.length<=256&&t.length>=3||"La descripcion debe ser menor a 256 y mayor a 3 caracteres"}],precioRules:[function(t){return!!t||"Debe llenar este campo"},function(t){return/^\d+(\.\d{1,2})?$/.test(t)||"El precio deben ser numero decimales"}],requiredRules:[function(t){return!!t||"Debe llenar este campo"}],adModal:0,adAccion:0,adNombre:"",adId:"",error:null}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo producto":"Actualizar producto"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.select()},methods:{listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},i={headers:e};n.a.get("api/Productos/Listar",i).then((function(e){t.productos=e.data,t.productosValidar=e.data})).catch((function(t){console.log(t)}))},select:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},i={headers:e},a=[];n.a.get("api/Categorias/Select",i).then((function(e){a=e.data,a.map((function(e){t.categorias.push({text:e.nombre,value:e.idCategoria})}))})).catch((function(t){console.log(t)}))},editItem:function(t){this.id=t.idProducto,this.idCategoria=t.idCategoria,this.codigo=t.codigo,this.nombre=t.nombre,this.stock=t.stock,this.precioVenta=t.precioVenta,this.descripcion=t.descripcion,this.editedIndex=1,this.dialog=!0},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.id="",this.$refs.form.reset(),this.valida=!0,this.idCategoria="",this.codigo="",this.nombre="",this.stock="1",this.precioVenta="1",this.descripcion="",this.editedIndex=-1},guardar:function(){if(this.$refs.form.validate()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t};if(this.editedIndex>-1){var i=this;n.a.put("api/Productos/ActualizarProducto",{idProducto:i.id,idCategoria:i.idCategoria,codigo:i.codigo,nombre:i.nombre,stock:i.stock,precioVenta:i.precioVenta,descripcion:i.descripcion},e).then((function(t){i.close(),i.listar(),i.limpiar()})).catch((function(t){403==t.response.status&&i.$swal("No tiene permisos para realizar esta acción")}))}else if(this.encuentra(this.nombre,this.codigo))console.log(this.nombre),this.$swal("El producto ya existe");else{var a=this;n.a.post("api/Productos/Crear",{idCategoria:a.idCategoria,codigo:a.codigo,nombre:a.nombre,stock:a.stock,precioVenta:a.precioVenta,descripcion:a.descripcion},e).then((function(t){a.close(),a.listar(),a.limpiar()})).catch((function(t){403==t.response.status&&a.$swal("No tiene permisos para realizar esta acción")}))}}},encuentra:function(t,e){for(var i=0,a=0;a<this.productosValidar.length;a++)this.productosValidar[a].nombre!=t&&this.productosValidar[a].codigo!=e||(i=1);return i},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<3||this.nombre.length>50)&&this.validaMensaje.push("El nombre debe tener más de 3 caracteres y menos de 50 caracteres."),this.idCategoria||this.validaMensaje.push("Seleccione una categoría."),this.stock&&0!=this.stock||this.validaMensaje.push("Ingrese el stock inicial del artículo."),this.precioVenta&&0!=this.precioVenta||this.validaMensaje.push("Ingrese el precio de venta del artículo."),this.validaMensaje.length&&(this.valida=1),this.valida},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e.idProducto,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},i={headers:e};n.a.put("api/Productos/Activar/"+this.adId,{},i).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(e){403!=e.response.status&&401!=e.response.status||t.$swal("No tiene permisos para realizar esta acción")}))},desactivar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},i={headers:e};n.a.put("api/Productos/Desactivar/"+this.adId,{},i).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(e){403!=e.response.status&&401!=e.response.status||t.$swal("No tiene permisos para realizar esta acción")}))}}},c=r,l=i("2877"),d=i("6544"),u=i.n(d),h=i("8336"),v=i("b0af"),m=i("99d9"),p=i("62ad"),f=i("a523"),g=i("8fea"),b=i("169a"),k=i("0e8f"),x=i("4bd4"),_=i("132d"),C=i("a722"),w=i("0fd9"),y=i("b974"),A=i("2fa4"),V=i("8654"),$=Object(l["a"])(c,a,s,!1,null,null,null);e["default"]=$.exports;u()($,{VBtn:h["a"],VCard:v["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:p["a"],VContainer:f["a"],VDataTable:g["a"],VDialog:b["a"],VFlex:k["a"],VForm:x["a"],VIcon:_["a"],VLayout:C["a"],VRow:w["a"],VSelect:y["a"],VSpacer:A["a"],VTextField:V["a"]})},"368e":function(t,e,i){},"4bd4":function(t,e,i){"use strict";var a=i("58df"),s=i("7e2b"),o=i("3206");e["a"]=Object(a["a"])(s["a"],Object(o["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))}):i.valid=e(t),i},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const i=this.watchers.find(t=>t._uid===e._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},a722:function(t,e,i){"use strict";i("20f6");var a=i("e8f2");e["a"]=Object(a["a"])("layout")}}]);